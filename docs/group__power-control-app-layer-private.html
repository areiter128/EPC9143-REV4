<!-- HTML header for doxygen 1.8.20-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EPC9143 300 W 1/16 th Brick Evaluation Module Software Documentation: Private Functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mchp.css" rel="stylesheet" type="text/css"/>
<link href="mchp_theme.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea" style="background-color: #000000;">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 36px;">
  <td id="projectlogo" style="padding-left: 0.2em; vertical-align: middle;"><img alt="Logo" src="microchip-docs.png"/></td>
  <td id="projectalign" style="padding-left: 0.0em;">
   <div id="projectname" style="color: white; font-size:16px;">EPC9143 300 W 1/16 th Brick Evaluation Module Software Documentation
   </div>
  </td>
   <td style="padding-top: 10px; height: 20px; vertical-align: top;">        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__power-control-app-layer-private.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Private Functions<div class="ingroups"><a class="el" href="group__firmware-flow.html">Firmware Flowchart</a> &raquo; <a class="el" href="group__task-layer.html">Task Layer</a> &raquo; <a class="el" href="group__power-control-app-layer.html">Power Control Application Layer</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Private functions of the Power Control Application Layer.  
<a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for Private Functions:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__power-control-app-layer-private.svg" width="352" height="51"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gad0f6ff4894bf23722884c60bbcdcacd0"><td class="memItemLeft" align="right" valign="top">volatile uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__power-control-app-layer-private.html#gad0f6ff4894bf23722884c60bbcdcacd0">appPowerSupply_ConverterObjectInitialize</a> (void)</td></tr>
<tr class="memdesc:gad0f6ff4894bf23722884c60bbcdcacd0"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function initializes the buck converter device driver instance.  <a href="group__power-control-app-layer-private.html#gad0f6ff4894bf23722884c60bbcdcacd0">More...</a><br /></td></tr>
<tr class="separator:gad0f6ff4894bf23722884c60bbcdcacd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0b26acfec74d1804384b4ba1a3cffab4"><td class="memItemLeft" align="right" valign="top">volatile uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__power-control-app-layer-private.html#ga0b26acfec74d1804384b4ba1a3cffab4">appPowerSupply_PeripheralsInitialize</a> (void)</td></tr>
<tr class="memdesc:ga0b26acfec74d1804384b4ba1a3cffab4"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is used to load peripheral configuration templates from the power controller device driver.  <a href="group__power-control-app-layer-private.html#ga0b26acfec74d1804384b4ba1a3cffab4">More...</a><br /></td></tr>
<tr class="separator:ga0b26acfec74d1804384b4ba1a3cffab4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0b4cabdb02c8c9ea94ea1dfa39de3764"><td class="memItemLeft" align="right" valign="top">volatile uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__power-control-app-layer-private.html#ga0b4cabdb02c8c9ea94ea1dfa39de3764">appPowerSupply_ControllerInitialize</a> (void)</td></tr>
<tr class="memdesc:ga0b4cabdb02c8c9ea94ea1dfa39de3764"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function initializes the control system feedback loop objects.  <a href="group__power-control-app-layer-private.html#ga0b4cabdb02c8c9ea94ea1dfa39de3764">More...</a><br /></td></tr>
<tr class="separator:ga0b4cabdb02c8c9ea94ea1dfa39de3764"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga213716a49f67b0e46a7fbb7665214e4f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__power-control-app-layer-private.html#ga213716a49f67b0e46a7fbb7665214e4f">appPowerSupply_CurrentBalancing</a> (void)</td></tr>
<tr class="memdesc:ga213716a49f67b0e46a7fbb7665214e4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function performs current balancing between the power supply phases.  <a href="group__power-control-app-layer-private.html#ga213716a49f67b0e46a7fbb7665214e4f">More...</a><br /></td></tr>
<tr class="separator:ga213716a49f67b0e46a7fbb7665214e4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab80ac65aae45f7f9d9fd4ef6f8c56111"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__power-control-app-layer-private.html#gab80ac65aae45f7f9d9fd4ef6f8c56111">appPowerSupply_CurrentSenseCalibration</a> (void)</td></tr>
<tr class="memdesc:gab80ac65aae45f7f9d9fd4ef6f8c56111"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function executes the current sense feedback calibration.  <a href="group__power-control-app-layer-private.html#gab80ac65aae45f7f9d9fd4ef6f8c56111">More...</a><br /></td></tr>
<tr class="separator:gab80ac65aae45f7f9d9fd4ef6f8c56111"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Private functions of the Power Control Application Layer. </p>
<p>The private functions of the power control application layer are used to configure the generic power controller device driver defined in <a class="el" href="dev__buck__typedef_8h_source.html" title="This file contains APIs to for the power control.">dev_buck_typedef.h</a> as well as to provide additional functions required by the specific hardware design. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga0b4cabdb02c8c9ea94ea1dfa39de3764"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0b4cabdb02c8c9ea94ea1dfa39de3764">&#9670;&nbsp;</a></span>appPowerSupply_ControllerInitialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint16_t appPowerSupply_ControllerInitialize </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function initializes the control system feedback loop objects. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">(none)</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>unsigned integer (0=failure, 1=success) </dd></dl>

<p class="definition">Definition at line <a class="el" href="app__power__control_8c_source.html#l00587">587</a> of file <a class="el" href="app__power__control_8c_source.html">app_power_control.c</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="group__power-control-app-layer-private_ga0b4cabdb02c8c9ea94ea1dfa39de3764_icgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="gad0f6ff4894bf23722884c60bbcdcacd0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad0f6ff4894bf23722884c60bbcdcacd0">&#9670;&nbsp;</a></span>appPowerSupply_ConverterObjectInitialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint16_t appPowerSupply_ConverterObjectInitialize </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function initializes the buck converter device driver instance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">(none)</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>unsigned integer (0=failure, 1=success) </dd></dl>
<p>&lt; Master time base is disabled, synchronization is established among PWM generators</p>
<p>&lt; Master phase starts at timebase counot of =0</p>
<p>&lt; Master time base is disabled, synchronization is established among PWM generators</p>

<p class="definition">Definition at line <a class="el" href="app__power__control_8c_source.html#l00322">322</a> of file <a class="el" href="app__power__control_8c_source.html">app_power_control.c</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="group__power-control-app-layer-private_gad0f6ff4894bf23722884c60bbcdcacd0_icgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="ga213716a49f67b0e46a7fbb7665214e4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga213716a49f67b0e46a7fbb7665214e4f">&#9670;&nbsp;</a></span>appPowerSupply_CurrentBalancing()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void appPowerSupply_CurrentBalancing </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function performs current balancing between the power supply phases. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">(none)</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>unsigned integer (0=failure, 1=success)</dd></dl>
<p>Current balancing in this design is performed on a 10 kHz frequency, triggered by the general state machine execution period. In each step the current sense feedback signals of each phase are compared. Phase #1 is considered to be the leading phase while all others are power multipliers.</p>
<p>If the current sense feedback signal of phase #2 is lower than that of phase #1, a static duty ratio offset of one PWM time-base tick is added to the duty ratio of phase #2 forcing more current flowing through phase #2, effectively shifting current from phase #1 to phase #2.</p>
<p>If the current sense feedback signal of phase #2 is higher than that of phase #1, the static duty ratio offset of phase #2 is reduced by one PWM time-base tick to force less current flowing through phase #2, effectively shifting current from phase #2 to phase #1.</p>
<p>Over several current balancing cycles this offset will accumulate until the phase currents are balanced.</p>
<p>Additional noise-floor signal filters are used to ensure the current balancing does not respond to small differences in immediate ADC samples. </p>

<p class="definition">Definition at line <a class="el" href="app__power__control_8c_source.html#l00717">717</a> of file <a class="el" href="app__power__control_8c_source.html">app_power_control.c</a>.</p>

</div>
</div>
<a id="gab80ac65aae45f7f9d9fd4ef6f8c56111"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab80ac65aae45f7f9d9fd4ef6f8c56111">&#9670;&nbsp;</a></span>appPowerSupply_CurrentSenseCalibration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void appPowerSupply_CurrentSenseCalibration </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function executes the current sense feedback calibration. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">(none)</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>unsigned integer (0=failure, 1=success)</dd></dl>
<p>This function performs a current sense feedback channel zero-offset calibration. The calibration is executed when the reference voltage is applied to the current sense shunt amplifiers but the power supply is still turned off. The offset value is determined by a 4x oversampling of each of the feedback signals to eliminate high-frequency noise. Once the calibration is complete, the 'cs_calib_complete' status bit in the buck converter power controller object status word is set, allowing the state machine to run. </p>

<p class="definition">Definition at line <a class="el" href="app__power__control_8c_source.html#l00755">755</a> of file <a class="el" href="app__power__control_8c_source.html">app_power_control.c</a>.</p>

</div>
</div>
<a id="ga0b26acfec74d1804384b4ba1a3cffab4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0b26acfec74d1804384b4ba1a3cffab4">&#9670;&nbsp;</a></span>appPowerSupply_PeripheralsInitialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint16_t appPowerSupply_PeripheralsInitialize </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function is used to load peripheral configuration templates from the power controller device driver. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">(none)</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>unsigned integer (0=failure, 1=success) </dd></dl>

<p class="definition">Definition at line <a class="el" href="app__power__control_8c_source.html#l00541">541</a> of file <a class="el" href="app__power__control_8c_source.html">app_power_control.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="group__power-control-app-layer-private_ga0b26acfec74d1804384b4ba1a3cffab4_cgraph.svg" width="100%" height="595"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="group__power-control-app-layer-private_ga0b26acfec74d1804384b4ba1a3cffab4_icgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.20-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <p style="height: 12px; padding-bottom: 8px; padding-right: 12px; vertical-align: bottom; text-align: right; font-size: 90%;">© 2020, Microchip Technology Inc.</p>
  </ul>
</div>
</body>
</html>
